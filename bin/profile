#!/bin/bash

PATH="$(pwd)/local/bin:$(pwd)/local/sbin:$PATH"
hash -r

export CFLAGS="-O2 -arch x86_64"
export LDFLAGS="-L$(pwd)/local/lib"
export CPPFLAGS="-I$(pwd)/local/include"

tmp_aliases=$(mktemp -t XXXXXX)

for pth_vagrant in ubuntu/vagrant/*; do
	[[ -d $pth_vagrant ]] || continue
	nm_vagrant=${pth_vagrant##*/}
  cat >> $tmp_aliases << EOF
  function $nm_vagrant {
    pushd $(pwd)/ubuntu > /dev/null
    bin/vagrant $nm_vagrant ssh "\$@"
    popd > /dev/null
  }
EOF
done

source $tmp_aliases
rm -f $tmp_aliases

